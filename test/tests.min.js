module("Syntax and coding standards");jsHintTest("JSHint","../8080.js");module("Basic tests");test("Namespace",function(){notEqual(CPU8080,null,"CPU8080 is defined");
equal(typeof(CPU8080),"object","CPU8080 is an object");});test("Init",function(){CPU8080.init();equal(typeof(CPU8080.status().pc),"number","CPU8080 INIT OK");
});module("Simple data tests",{setup:function(){CPU8080.init();}});test("Reset",function(){CPU8080.set("PC",85);CPU8080.reset();equal(CPU8080.status().pc,0,"Reset PC OK");
equal(CPU8080.T(),0,"Reset T counter OK");});test("Register manipulations",function(){CPU8080.set("A",85);CPU8080.set("B",170);CPU8080.set("SP",4660);CPU8080.set("PC",65535);
equal(CPU8080.status().a,85);equal(CPU8080.status().b,170);equal(CPU8080.status().sp,4660);equal(CPU8080.status().pc,65535);});module("Disassembler");test("NOP, just NOPs",function(){var a=CPUD8080.disasm(0,0,0,0,0);
equal(a[0],"NOP","Instruction decoded OK");equal(a[1],1,"Instruction length OK");});test("XRA A",function(){var a=CPUD8080.disasm(175,0,0,0,0);equal(a[0],"XRA A","Instruction decoded OK");
equal(a[1],1,"Instruction length OK");});module("Single step",{setup:function(){CPU8080.init(null,function(a){return 0;});CPU8080.reset();}});test("NOP, just NOPs",function(){CPU8080.steps(1);
equal(CPU8080.status().pc,1,"NOP OK");equal(CPU8080.T(),4,"Timing OK");});test("RST7",function(){CPU8080.init(function(b,c){},function(a){return 255;});
CPU8080.steps(1);equal(CPU8080.status().pc,56,"RST7 OK");equal(CPU8080.T(),11,"Timing OK");});